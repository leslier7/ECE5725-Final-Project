<!-- Bootstrap core CSS -->
 <!-- 1. write subsections for Design (for the formatting the section) -->


<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Starter Template for Bootstrap</title>

    <!-- Bootstrap core CSS -->
    <link href="dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700&family=Inter:wght@400;500;600&family=Merriweather:wght@400;500&display=swap" rel="stylesheet">

    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <!-- <link href="../../assets/css/ie10-viewport-bug-workaround.css" rel="stylesheet"> -->

    <!-- Custom styles for this template -->
    <link href="starter-template.css" rel="stylesheet">

    <!-- Just for debugging purposes. Don't actually copy these 2 lines! -->
    <!--[if lt IE 9]><script src="../../assets/js/ie8-responsive-file-warning.js"></script><![endif]-->
    <!-- <script src="../../assets/js/ie-emulation-modes-warning.js"></script> -->

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>

  <body>

    <nav class="navbar navbar-inverse navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#">Project name</a>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
          <ul class="nav navbar-nav">
            <li class="active"><a href="#header">Header</a></li>
            <li><a href="#intro">Introduction</a></li>
            <li><a href="#obj">Project Objective</a></li>
            <li><a href="#video">Project Video</a></li>
            <li><a href="#design-testing">Design &amp; Testing</a></li>
            <li><a href="#result">Results</a></li>
            <li><a href="#conclusion">Conclusions</a></li>
            <li><a href="#future">Future Work</a></li>
            <li><a href="#figures">Figures &amp; Media</a></li>
            <li><a href="#team">Team Contributions</a></li>
            <li><a href="#parts">Parts List</a></li>
            <li><a href="#references">References</a></li>
            <li><a href="#code">Code Appendix</a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>

    <div class="container page-content">

      <section class="header-panel" id="header">
        <div class="header-panel__intro">
          <h1>Dual-Mode Gesture Control:<br>A Unified Interface for Robot and Game Interaction</h1>
          <p class="lead">ECE5725 Final Project</p>
        </div>
        <div class="header-panel__details">
          <div class="header-details-grid">
            <div class="header-detail">
              <p class="header-detail__label">Team Members</p>
              <ul class="header-detail-list">
                <li>Robbie Leslie (rwl228)</li>
                <li>Shiqi Liu (sl3646)</li>
              </ul>
            </div>
            <div class="header-detail">
              <p class="header-detail__label">Advisor</p>
              <p class="header-detail__value">Dr. Danna Ma</p>
            </div>
            <div class="header-detail">
              <p class="header-detail__label">Submission Date</p>
              <p class="header-detail__value">December 12, 2025</p>
            </div>
            
          </div>
        </div>
      </section>

      <hr id="video">

      <div class="center-block" style="text-align:center;">
          <h2>Project Video</h2>
          <iframe width="640" height="360" src="https://www.youtube.com/watch?v=et91Gea6CPk" frameborder="0" allowfullscreen></iframe>
          <p style="margin-top:10px;">Demonstration clip highlighting the system in action.</p>
      </div>

      <hr id="intro">

      <div style="text-align:center;">
              <h2>Introduction</h2>
              <p style="text-align: left;padding: 0px 30px;">In ECE5725, we explored many ways to use the Raspberry Pi for hardware-software integration, but our interactions with the system remained limited. Most operations relied on keyboards, mice, or prewritten scripts, offering little in terms of intuitive, real-time control.</p>
              <p style="text-align: left;padding: 0px 30px;">In everyday life, our hands are the primary tools for interacting with the physical world—whether driving, eating, gaming, or performing fine-grained tasks. Motivated by this observation, we set out to design a more natural and expressive interface for the Raspberry Pi. Our project introduces a dual-mode unified gesture-control system that allows users to control different applications simply by wearing a sensor-enabled glove.</p>
              <p style="text-align: left;padding: 0px 30px;">We wanted to make sure that both of our modes would demonstrate the strengths of embedded systems. This meant having both a strong graphical component to show the power of the Linux desktop, as well as a hardware component. We decided to build a game and a robot that would utilize our gloves as the control method.</p>
      </div>

    <hr id='obj'>

      <div style="text-align:center;">
          <h2>Project Objective (Will make a new fig)</h2>
      </div>
      <div class="project-objective">
          <div class="project-objective__image">
              <img class="img-rounded" src="pics/systemStructure.png" alt="Generic placeholder image" width="360" height="240">
          </div>
          <div class="project-objective__content">
              <ul class="objective-list">
                  <li>Build a reliable wireless communication channel between the gesture glove and the Raspberry Pi.</li>
                  <li>Stabilize IMU motion data through real-time filtering so the glove behaves more like a controller and less like a jittery sensor.</li>
                  <li>Map hand gestures to continuous motor commands for smooth and intuitive robot navigation.</li>
                  <li>Use the IMU accelerometer to control two cursors in a video game built with C and Raylib.</li>
              </ul>
          </div>
      </div>

    <hr id='design-testing'>

      <div style="text-align:center;">
              <h2>Key Design Milestones</h2>
              <div class="design-sections">
                  <div class="design-section">
                      <h3><span>1</span> Milestone 1 — IMU ↔ Dongle Communication</h3>
                      <p>The first major checkpoint was establishing a reliable data path between the IMU and our wireless dongle. We powered the microcontroller with the IMU over USB-C and connected the dongle to a laptop for rapid debugging. Once we had confirmed that the microcontroller and dongle were communicating correctly, we had to then have the dongle talk to the Pi. This was done using Serial, and we build readers in both C any Python since we used both languages.</p>
                      <p>There were multiple ways that we could have had a microcontroller communicate with the Pi. Two of the most popular are WiFi and Bluetooth. If we chose WiFi, we would have had a microcontroller connect to a network, and then used UDP to steam data packets from the microcontroller to the Pi. This would have been fast enough, and is well documented. However, it would require conencting the microcontroller to a network, and university managed networks are notorious for having limitations which make it difficult to communicate.</p>
                      <p>Bluetooth is a widely used low-power 2.4GHz communication protocol used to stream data. It would have met most of our design requirments, except it can have higher latancy. But the main reason that we choose not to use Bluetooth is ease of development. The Bluetooth protocol is a bit messy, which makes it hard to devleop for. It is well documented, but still can be fiddly.</p>
                      <p>To solve both the latency problem, and the ease of development, we looked into using direct 2.4GHz communication with a dongle. This technique is often used with wireless gaming mice. During our research, we found out about Nordic Semiconductor's Enhanced ShockBurst (ESB). This protocol is used for low latency 2.4GHz communication between one recievcer and up to eight transmitters. It is enabled on the nRF52 series of microcontrollers.</p>
                      <p>And what sealed the deal was the XIAO nRF52840 Sense board with an integrated LSM6DSO 6-axis IMU. Having the IMU built into the microcontroller development board would save us from having two different PCBs attached to the gloves. It also has a built in battery charge circuit, so we would just need to connect a battery and it would be able to charge it over USB-C through the micrcontroller board. Then to connect to the Pi, we could get the nRF52840 Dongle, which is designed for applications like being a reciever over USB. Using this combiation also meant that we got to try using Zephyr, a popular Real-Time Operating System for microcontrollers.</p>
                      <p>Once the microcontroller to Pi communication was complete, Shiqi and Robbie split their development tracks. Shiqi owned the Python-based motor interface, while Robbie moved to the C/Raylib environment required for the slicing game.</p>
                  </div>
                  <div class="design-section">
                      <h3><span>2</span> Milestone 2 — Motor-Control Development</h3>
                      <p><strong>IMU filtering.</strong> Early complementary-filter tests produced noticeable drift and sluggish steering response. Since the schedule allowed additional iteration, Shiqi transitioned to a Mahony-based filter, which significantly improved stability and reduced orientation error to levels suitable for continuous real-time control.</p>
                      <p><strong>Gesture-to-motor mapping.</strong> After assembling the robot platform, Shiqi implemented the mapping from filtered IMU orientation to forward and turning commands. During this stage, the team switched from the Lab 3 DC motor to a Parallax Feedback 360° high-speed servo, which offered stronger and more consistent motion. Several tuning rounds ensured that hand tilts translate into smooth, intuitive robot movement.</p>
                  </div>
                  <div class="design-section">
                      <h3><span>3</span> Milestone 3 — Game Development</h3>
                      <p><strong>Game Template.</strong> To start off developemnt, Robbie chose to use Raylib with C. For the class, we have learned PyGame with Python. Robbie chose to use Raylib and C for a few reasons. The first is a personal preference for C over Python. The second is that he has a bit of experience in Raylib from building a game for a game jam with Raylib and Odin. But the third and most important reason is performance. Python is an interpreted language, which means that is very slow compared to a compiled language like C. Real game developers mostly use C++ to avoid the overhead that comes from inperpreted languages. C was chosen over C++ mostly because of familiarity. To get started, Raylib has an offical C template which contains example code for how to have different screens, and set up a Raylib project. </p>
                      <p><strong>Control Implementation.</strong> With the template in place, the next task was to get the cursors working. This meant reading the IMU data from the dongle, and using it to change the position of the cursor. In order to do that, Robbie developed the algorithm to try and convert the acceleration data into position via double integration. To get proper measurements, the IMUs are calibrated to try and remove any bias they have. Then, we try to filter out gravity so the acceleration is only from movement, this is partially done using a high-pass filter. A deadzone is also applied to get rid of very small movements. Next, the acceleration is integrated to get the velocity. The velocity is damped, clamped, and another deadzone is applied before it is finally integrated to get the position. The results were inconsistent, but good enough to move on to the next parts of development.</p>
                      <p><strong>Gameplay.</strong> With cursors working, it was finally time to add the fruits to the game. Three fruits were added with various sizes, as well as a bomb. The smaller the fruit, the higher the points that were scored for slicing it. Touching a bomb would cause a game over. In order to make testing easier, a debug mode was added where the mouse would act like the left cursor instead of IMU data. With the basic gameplay in place, all that was left was to polish the game by adding buttons, a start and end screen, and the abiltiy to replay the game. A local high score system was also added which keeps track of the best score since the game has been launched. This local high score is only stored in the game, so closing the game resets the high score. We planned on adding a global high score by saving the scores in a file, however this was cut due to time constraints.</p>
                  </div>
              </div>
      </div>

    <hr id='figures'>

      <div style="text-align:center;">
              <h2>Figures, Drawings, and Supporting Media</h2>
              <p style="text-align: left;padding: 0px 30px;">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum lorem nulla, consectetur at leo vel, pretium bibendum nisl. Cras blandit quam a enim ultrices, eu convallis enim posuere. Donec eleifend enim sed purus consectetur, vitae cursus lectus varius. Vivamus consectetur felis nec est venenatis posuere. Phasellus vitae aliquet erat. In laoreet lacinia mollis. Quisque iaculis nisl fermentum pharetra lobortis. Donec rhoncus dui sem, ac molestie leo tristique vel. Phasellus in nibh feugiat, fringilla lectus in, elementum magna. Etiam quis dui condimentum, tempus ex in, dapibus est. Cras ut congue augue. Donec ac enim ex. Ut id tristique risus, vel porttitor quam. Sed ultricies enim eu nibh porttitor, vel sodales enim feugiat. Fusce volutpat venenatis magna ac ultrices. Curabitur eget urna ut nulla mattis convallis non eu diam.</p>
              <div style="margin: 30px 0;">
                <p style="margin-top:8px;font-style:italic;font-size:25px;">Figure 1: Glove schematic</p>
                <img class="img-rounded" src="pics/gloveschematic.png" alt="Glove schematic" style="max-width:80%;height:auto;">
                <p style="margin-top:8px;font-size:18px;">The schematic is very simple, just the battery and button. The button uses an internal pull-up resistor. A little bit of hot glue is put on the battery connection to make it stronger and reduce the chance of the wires breaking off.</p>
              </div>

              <div style="margin: 30px 0;">
                <p style="margin-top:8px;font-style:italic;font-size:25px;">Figure 2: Gloves with microcontroller and battery</p>
                <img class="img-rounded" src="pics/GlovesOnTableMicrocontrollerView.jpg" alt="Glove microcontroller" style="max-width:80%;height:auto;">
                <p style="margin-top:8px;font-size:18px;">The microcontrollers are hot glued to the gloves. The batteries are attched with velcro to make them easy to remove.</p>
              </div>

              <div style="margin: 30px 0;">
                <p style="margin-top:8px;font-style:italic;font-size:25px;">Figure 3: Gloves with button</p>
                <img class="img-rounded" src="pics/GlovesOnTableButtonView.jpg" alt="Glove button" style="max-width:80%;height:auto;">
                <p style="margin-top:8px;font-size:18px;">The buttons are also hot glued to the gloves. This figure also shows the JST connectors used to connect the batteries. This allows them to be fully removed.</p>
              </div>

              <div style="margin: 30px 0;">
                <p style="margin-top:8px;font-style:italic;font-size:25px;">Figure 4: Robot Top View</p>
                <img class="img-rounded" src="pics/RobotTopView.jpg" alt="Robot top" style="max-width:80%;height:auto;">
              </div>

              <div style="margin: 30px 0;">
                <p style="margin-top:8px;font-style:italic;font-size:25px;">Figure 5: Fruit Samurai Title Screen</p>
                <img class="img-rounded" src="pics/FruitSamuraiTitle.png" alt="Fruit title" style="max-width:80%;height:auto;">
                <p style="margin-top:8px;font-size:18px;">The dots labeled "L" and "R" are the left and right cursors, respectively. To start the game, the user moves one of them over the Start button and presses the button on the corresponding glove.</p>
              </div>

              <div style="margin: 30px 0;">
                <p style="margin-top:8px;font-style:italic;font-size:25px;">Figure 6: Fruit Samurai Gameplay Screen</p>
                <img class="img-rounded" src="pics/FruitSamuraiGameplay.png" alt="Fruit title" style="max-width:80%;height:auto;">
                <p style="margin-top:8px;font-size:18px;">If the user presses either glove's button during gameplay, it re-centers both cursors</p>
              </div>
      </div>

    <hr id='result'>

      <div style="text-align:center;">
              <h2>Results</h2>
              <p style="text-align: left;padding: 0px 30px;">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum lorem nulla, consectetur at leo vel, pretium bibendum nisl. Cras blandit quam a enim ultrices, eu convallis enim posuere. Donec eleifend enim sed purus consectetur, vitae cursus lectus varius. Vivamus consectetur felis nec est venenatis posuere. Phasellus vitae aliquet erat. In laoreet lacinia mollis. Quisque iaculis nisl fermentum pharetra lobortis. Donec rhoncus dui sem, ac molestie leo tristique vel. Phasellus in nibh feugiat, fringilla lectus in, elementum magna. Etiam quis dui condimentum, tempus ex in, dapibus est. Cras ut congue augue. Donec ac enim ex. Ut id tristique risus, vel porttitor quam. Sed ultricies enim eu nibh porttitor, vel sodales enim feugiat. Fusce volutpat venenatis magna ac ultrices. Curabitur eget urna ut nulla mattis convallis non eu diam.</p>
      </div>

    <hr id='conclusion'>

      <div style="text-align:center;">
              <h2>Conclusions</h2>
              <p style="text-align: left;padding: 0px 30px;">This section summarizes the key lessons learned, performance metrics we achieved, and whether the prototype met the original objectives.</p>
      </div>

    <hr id='future'>

      <div style="text-align:center;">
              <h2>Future Work</h2>
              <p style="text-align: left;padding: 0px 30px;">Here we outline sensible next steps, such as hardening the enclosure, refining the algorithms, and preparing the build for broader deployment.</p>
      </div>

    <hr id='team'>

    <div class="row" style="text-align:center;">
          <h2>Team Contributions</h2>
          <p style="text-align: left;padding: 0px 30px;">Each teammate owned a subset of the hardware, firmware, and documentation tasks, and we met daily to integrate and review progress.</p>
          <div style="text-align:center;">
              <img class="img-rounded" src="pics/group.jpg" alt="Generic placeholder image" style="width:60%;">
              <h4>Project group picture</h4>
          </div>
          <div class="col-md-6" style="font-size:16px">
              <img class="img-rounded" src="pics/a.png" alt="Generic placeholder image" width="240" height="240">
              <h3>Rick</h3>
              <p class="lead">netid@cornell.edu</p>
              <p>Designed the overall software architecture (Just being himself).
          </div>
          <div class="col-md-6" style="font-size:16px">
              <img class="img-rounded" src="pics/b.png" alt="Generic placeholder image" width="240" height="240">
              <h3>Morty</h3>
              <p class="lead">netid@cornell.edu</p>
              <p>Tested the overall system.
          </div>
      </div>

    <hr id='parts'>
      <div style="font-size:18px">
          <h2>Parts List</h2>
          <ul>
              <li>Raspberry Pi Model 4B with 2GB RAM - $45.00 (included in lab materials)</li>
              <a href="https://www.digikey.com/en/products/detail/seeed-technology-co-ltd/102010469/16652896"><li>2x Seeed Studio XIAO nRF52840 Plus - $31.98</li></a>
              <a href="https://www.digikey.com/en/products/detail/nordic-semiconductor-asa/NRF52840-DONGLE/9491124"><li>nRF52840 Dongle - $10.00</li></a>
              <a href="https://www.adafruit.com/product/2011"><li>2x 3.7V 1200mAh LiPo Battery - $19.90 (found in lab)</li></a>
              <li>2x Buttons - Found in Robbie's spare parts drawer</li>
              <li>TODO add motors - TODO</li>
          </ul>
          <h3>Total without Pi: $TODO</h3>
          <h3>Total with Pi: $TODO</h3>
      </div>
      <hr id='references'>
      <div style="font-size:18px">
          <h2>References</h2>
          <a href="http://www.micropik.com/PDF/SG90Servo.pdf">Tower Pro Servo Datasheet</a><br>
          <a href="http://getbootstrap.com/">Bootstrap</a><br>
          <a href="http://abyz.co.uk/rpi/pigpio/">Pigpio Library</a><br>
          <a href="https://sourceforge.net/p/raspberry-gpio-python/wiki/Home/">R-Pi GPIO Document</a><br>
          <a href="https://www.raylib.com/">Raylib</a><br>
          <a href="https://www.raylib.com/cheatsheet/cheatsheet.html">Raylib Cheatsheet</a><br>
          <a href="https://github.com/raysan5/raylib-game-template">Raylib C Template</a><br>
          <a href="https://wiki.seeedstudio.com/XIAO_BLE/">Seeed Studio XIAO nRF52840 Wiki</a><br>
          <a href="https://docs.nordicsemi.com/bundle/ncs-latest/page/nrf/protocols/esb/index.html">nRF Enhanced ShockBurst Documentation</a><br>
          <a href="https://github.com/nrfconnect/sdk-nrf/tree/v3.1.0/samples">nRF Samples</a><br>
          <a href="https://github.com/nrfconnect/sdk-nrf/tree/v3.1.0/samples/esb">nRF ESB Samples</a><br>
          <a href="https://github.com/zephyrproject-rtos/zephyr/tree/main/samples/sensor/lsm6dso">Zephyr LSM6DSO Example</a><br>
          

      </div>

    <hr id='code'>

      <div class="code-appendix" style="text-align:left;">
              <h2>Code Appendix</h2>
              <p><strong>Full source code available on GitHub:</strong> <a href="https://github.com/leslier7/ECE5725-Final-Project/tree/main" target="_blank">https://github.com/leslier7/ECE5725-Final-Project/tree/main</a></p>
              
              <h3>Key Files and Directories</h3>
              <div>
                <ul>
                  <li><strong>microcontroller/</strong> - Firmware for both the glove microcontroller and dongle, as well as old demos. </li>
                  <li><strong>microcontroller/imu_tx</strong> - Firmware for the glove microcontroller. The left and right glove is set with a compiler flag. </li>
                  <li><strong>microcontroller/dongle_rx</strong> - Firmware for the dongle. </li>
                  <li><strong>pi/</strong> - Top level for all the software which runs on the Pi</li>
                  <li><strong>pi/c-game/</strong> - Raylib C implementation of Fruit Samurai game</li>
                  <li><strong>pi/TODO/</strong> - TODO motor control file path</li>
                  <li><strong>website/</strong> - This documentation website</li>
                </ul>
              </div>
      </div>

    </div><!-- /.container -->




    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="../../assets/js/vendor/jquery.min.js"><\/script>')</script>
    <script src="dist/js/bootstrap.min.js"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <!-- <script src="../../assets/js/ie10-viewport-bug-workaround.js"></script> -->
  </body>
</html>
